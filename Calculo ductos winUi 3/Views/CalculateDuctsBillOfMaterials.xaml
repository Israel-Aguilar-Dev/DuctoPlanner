<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Calculo_ductos_winUi_3.Views.CalculateDuctsBillOfMaterials"
    x:Name="Root"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Calculo_ductos_winUi_3.Views"
    xmlns:localState="using:Calculo_ductos_winUi_3.ViewModels"
    xmlns:model="using:Calculo_ductos_winUi_3.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Page.Resources>

    </Page.Resources>
    
    
        
        <Grid >
        <Grid.RowDefinitions>
            <!--<RowDefinition Height="Auto"></RowDefinition>-->
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <!--<TextBlock 
        Text="Despiece" 
        Margin="16,16,16,0" 
        HorizontalAlignment="Center"
        Style="{StaticResource SubtitleTextBlockStyle}"
        Grid.Row="0"/>-->
        <Grid x:Name="BillOfMaterials"
        CornerRadius="8"
        Margin="16,16,36,36"  >
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid x:Name="leftCardContainer"
            Grid.Column="0"
            Grid.Row="1"
            >
                <!-- Frente de la tarjeta -->
                <Grid x:Name="FrontCard" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                Margin="0,0,8,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <TextBlock 
                    Text="Ductos" 
                    Margin="36,16,36,0" 
                    HorizontalAlignment="Center"
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <Button
                    x:Name="DetailDuctByFloor"
                    HorizontalAlignment="Right"
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Margin="0,8,36,0" 
                        BorderThickness="0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Click="FlipCard">
                        <!--Detalles-->
                        <FontIcon Glyph="&#xE8AB;" />
                    </Button>
                    <Grid Grid.Row="1" Grid.ColumnSpan="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <!-- TÃ­tulos -->
                            <RowDefinition Height="*"/>
                            <!-- Scrollable content -->
                        </Grid.RowDefinitions>

                        <!-- TITULOS FIJOS -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Padding="6" Margin="10" TextAlignment="Center" Text="Tipo de Ducto"/>
                            <TextBlock Grid.Column="1" Padding="6" Margin="10" TextAlignment="Center" Text="Cantidad"/>
                            <Path 
                            Stroke="Gray"
                            StrokeThickness="0.5"
                            Data="M 0,0 L 1,0" 
                            Grid.ColumnSpan="2"
                            Margin="36,0,36,0"
                            Stretch="Fill" 
                            VerticalAlignment="Bottom"/>
                        </Grid>

                        <!-- SCROLL SOLO PARA DATOS -->
                        <ScrollViewer Grid.Row="1"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          CornerRadius="8"
                          Margin="16,0,16,16">
                            <ItemsControl ItemsSource="{x:Bind stateApp.DuctsVM.DucList, Mode=OneWay}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="model:DuctModel">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition/>
                                                <ColumnDefinition/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Grid.Column="0" Padding="6" Margin="10" TextAlignment="Center" Text="{x:Bind TypeString}"/>
                                            <TextBlock Grid.Column="1" Padding="6" Margin="10" TextAlignment="Center" Text="{x:Bind Count}"/>
                                            <Path 
                                            Stroke="Gray"
                                            StrokeThickness="0.5"
                                            Data="M 0,0 L 1,0" 
                                            Grid.ColumnSpan="2"
                                            Margin="36,0,36,0"
                                            Stretch="Fill" 
                                            VerticalAlignment="Bottom"
                                            StrokeDashArray="8,12"/>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>
                </Grid>
                <!-- Reverso de la tarjeta -->
                <Grid x:Name="BackCard" 
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" 
                CornerRadius="8"
                Margin="0,0,8,0"
                Visibility="Collapsed" >
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <TextBlock 
                    Text="Ductos por piso" 
                    Margin="36,16,36,8" 
                    HorizontalAlignment="Center"
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    <Button
                    x:Name="DuctsResume"
                    HorizontalAlignment="Right"
                    Grid.Row="0"
                    Grid.ColumnSpan="2"
                    Margin="0,8,36,0" 
                    VerticalContentAlignment="Top"
                    BorderThickness="0"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Click="FlipCard">
                        <!--Resumen-->
                        <FontIcon Glyph="&#xE8AB;" />
                    </Button>
                    <Grid CornerRadius="8"
                    Margin="16,0,16,16"
                    Grid.Row="1"
                    Grid.ColumnSpan="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid
                        x:Name="DuctsByFloorTable"
                        VerticalAlignment="Top"
                        CornerRadius="8"
                        Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                                <ColumnDefinition Width="3*"></ColumnDefinition>
                                <ColumnDefinition Width="2*"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Tag="0" Grid.Column="0" TextWrapping="Wrap" Padding="6" Margin="10" TextAlignment="Center">Piso</TextBlock>
                            <TextBlock Tag="0" Grid.Column="1" TextWrapping="Wrap" Padding="6" Margin="10" TextAlignment="Center">Tipo de ducto</TextBlock>
                            <TextBlock Tag="0" Grid.Column="2" TextWrapping="Wrap" Padding="6" Margin="10" TextAlignment="Center">Cantidad</TextBlock>
                            <Path 
                            Stroke="Gray"
                            StrokeThickness="0.5"
                            Data="M 0,0 L 1,0" 
                            Grid.ColumnSpan="3"
                            Margin="16,0,16,0"
                            Stretch="Fill" 
                            VerticalAlignment="Bottom"/>
                        </Grid>
                        <ScrollViewer
                        VerticalScrollBarVisibility="Auto"
                        HorizontalScrollBarVisibility="Disabled"
                        Grid.Row="1">
                            <ItemsControl ItemsSource="{x:Bind stateApp.DuctsVM.DuctDetailList, Mode=OneWay}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="model:FloorDuctDetailModel">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="2*"></ColumnDefinition>
                                                <ColumnDefinition Width="3*"></ColumnDefinition>
                                                <ColumnDefinition Width="2*"></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Tag="0" Grid.Column="0" Padding="6" Margin="6" TextAlignment="Center" Text="{x:Bind FloorName}"></TextBlock>
                                            <TextBlock Tag="0" Grid.Column="1" Padding="6" Margin="6" TextAlignment="Center" Text="{x:Bind DuctType}"></TextBlock>
                                            <TextBlock Tag="0" Grid.Column="2" Padding="6" Margin="6" TextAlignment="Center" Text="{x:Bind Count}"></TextBlock>
                                            <Path 
                                                Stroke="Gray"
                                                StrokeThickness="{x:Bind StrokeThickness}"
                                                Data="M 0,0 L 1,0" 
                                                Grid.ColumnSpan="3"
                                                Margin="36,0,36,0"
                                                Stretch="Fill" 
                                                VerticalAlignment="Bottom"
                                                StrokeDashArray="{x:Bind StrokeDashArray}"/>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </Grid>

                </Grid>
            </Grid>
            <Grid x:Name="rigthCardContainer"
            Grid.Column="1"
            Grid.Row="1"
            CornerRadius="8"
            Margin="8,0,0,0"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>
                <TextBlock 
                Text="Componentes" 
                Margin="36,16,36,8" 
                HorizontalAlignment="Center"
                Grid.Row="0"
                Grid.ColumnSpan="2"
                Style="{StaticResource BodyStrongTextBlockStyle}"/>
                <Grid CornerRadius="8"
                Margin="16,0,16,16"
                Grid.Row="1"
                Grid.ColumnSpan="2">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid x:Name="ComponentTableTitles"
                    VerticalAlignment="Top"
                    CornerRadius="8"
                    Grid.Row="0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <TextBlock Tag="0" Grid.Column="0" Padding="6" Margin="10" TextAlignment="Center">Nombre</TextBlock>
                        <TextBlock Tag="0" Grid.Column="1" Padding="6" Margin="10" TextAlignment="Center">Cantidad</TextBlock>
                        <Path 
                        Stroke="Gray"
                        StrokeThickness="0.5"
                        Data="M 0,0 L 1,0" 
                        Grid.ColumnSpan="2"
                        Margin="16,0,16,0"
                        Stretch="Fill" 
                        VerticalAlignment="Bottom"/>
                    </Grid>
                    <ScrollViewer
                    VerticalScrollBarVisibility="Auto"
                    HorizontalScrollBarVisibility="Disabled"
                    Grid.Row="1">
                        <ItemsControl ItemsSource="{x:Bind stateApp.ComponentsVM.ComponentList, Mode=OneWay}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate x:DataType="model:ComponentModel">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="2*"></ColumnDefinition>
                                            <ColumnDefinition Width="*"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Tag="0" Grid.Column="0" Padding="6" Margin="6" TextWrapping="Wrap" TextAlignment="Center" Text="{x:Bind Name}"></TextBlock>
                                        <TextBlock Tag="0" Grid.Column="1" Padding="6" Margin="6" TextWrapping="Wrap" TextAlignment="Center" Text="{x:Bind Count}"></TextBlock>
                                        <Path 
                                        Stroke="Gray"
                                        StrokeThickness="0.5"
                                        Data="M 0,0 L 1,0" 
                                        Grid.ColumnSpan="3"
                                        Margin="36,0,36,0"
                                        Stretch="Fill" 
                                        VerticalAlignment="Bottom"
                                        StrokeDashArray="8,12"/>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>

            </Grid>
        </Grid>
    </Grid>

</Page>
